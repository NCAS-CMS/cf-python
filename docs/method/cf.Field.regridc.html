
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>cf.Field.regridc &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/customise-alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/toggleprompt.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Field.regrids" href="cf.Field.regrids.html" />
    <link rel="prev" title="cf.Field.isscalar" href="../attribute/cf.Field.isscalar.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo"/>
            </a></p>



<h1 class="logo"><a href="../index.html">cf 3.16.1</a></h1>



<p class="blurb">A CF-compliant earth science data analysis library</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NCAS-CMS&repo=cf-python&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf_data_model.html"><strong>CF data model</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheet.html"><strong>Cheat Sheet</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html"><strong>Recipes using cf</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html"><strong>Analysis</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation_rules.html"><strong>Aggregation rules</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html"><strong>Contributing</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cf classes</strong></a><ul>
  <li><a href="../class/cf.Field.html">cf.Field</a><ul>
      <li>Previous: <a href="../attribute/cf.Field.isscalar.html" title="previous chapter">cf.Field.isscalar</a></li>
      <li>Next: <a href="cf.Field.regrids.html" title="next chapter">cf.Field.regrids</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>

<br>
cf development has been supported by
the <a href="https://erc.europa.eu/">ERC</a>
through <a href="https://cordis.europa.eu/project/id/247220">Seachange</a>
and
<a href="https://cordis.europa.eu/project/id/786427">Couplet</a>; by
the <a href="https://ec.europa.eu/programmes/horizon2020/">EC Horizon
2020 programme</a> through
<a href="https://cordis.europa.eu/project/id/824084">IS-ENES3</a>;
by <a href="https://nerc.ukri.org/">NERC</a> through
<a href="https://gtr.ukri.org/project/0D95A6DB-0B95-48F7-8A8B-7B9A47DEA117">UKFAFMIP</a>;
and by <a href="https://ncas.ac.uk/">NCAS</a>.
<br>
<br>
<img src="../_templates/logo_EC.png" height="40">
<img src="../_templates/logo_ERC.png" height="40">
<img src="../_templates/logo_NERC.png" height="40">
<br>
<img src="../_templates/logo_NCAS.png" height="40">
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="cf-field-regridc">
<h1>cf.Field.regridc<a class="headerlink" href="#cf-field-regridc" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cf.Field.regridc">
<code class="sig-prename descclassname">Field.</code><code class="sig-name descname">regridc</code><span class="sig-paren">(</span><em class="sig-param">dst</em>, <em class="sig-param">axes=None</em>, <em class="sig-param">method=None</em>, <em class="sig-param">use_src_mask=True</em>, <em class="sig-param">use_dst_mask=False</em>, <em class="sig-param">fracfield=False</em>, <em class="sig-param">axis_order=None</em>, <em class="sig-param">ignore_degenerate=True</em>, <em class="sig-param">return_operator=False</em>, <em class="sig-param">check_coordinates=False</em>, <em class="sig-param">min_weight=None</em>, <em class="sig-param">weights_file=None</em>, <em class="sig-param">inplace=False</em>, <em class="sig-param">i=False</em>, <em class="sig-param">_compute_field_mass=None</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cf-python/blob/v3.16.1/cf/field.py#L13756-L13998"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cf.Field.regridc" title="Permalink to this definition">¶</a></dt>
<dd><p>Regrid the field to a new Cartesian grid.</p>
<p>Regridding is the process of interpolating the field data
values while preserving the qualities of the original data,
and the metadata of the unaffected axes. The metadata for the
regridded axes are taken from the <em>dst</em> parameter.</p>
<p>Between one and three axes may be simultaneously regridded in
Cartesian space.</p>
<p><strong>Coordinates</strong></p>
<p>The source and destination grids of the regridding must both
be defined by equivalent coordinates, which must be 1-d
dimension coordinates. These are automatically detected from
the field being regridded and the specification of the
destination grid given by the <em>dst</em> parameter.</p>
<p><strong>UGRID meshes</strong></p>
<p>At present, Cartesian regridding is only available when
neither the source nor destination grid is a UGRID mesh.</p>
<p><strong>Masked cells</strong></p>
<p>By default, the data mask of the source data is taken into
account during the regridding process, but the destination
grid mask is not. This behaviour may be changed with the
<em>use_src_mask</em> and <em>use_dst_mask</em> parameters.</p>
<p>In general the source data may be arbitrarily masked, meaning
that the mask for the regridding axes may vary along the
non-regridding axes. The exceptions to this are for
second-order conservative, patch recovery regridding, and
nearest source to destination methods, for which the mask of
the regridding axes must be the same across all non-regridding
axes. In these special cases an exception will be raised if
the source data mask does not meet this requirement.</p>
<p><strong>Implementation</strong></p>
<p>The interpolation is carried out using regridding weights
calculated by the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code> package, a Python interface to the
Earth System Modeling Framework regridding utility (ESMF,
<a class="reference external" href="https://earthsystemmodeling.org/regrid">https://earthsystemmodeling.org/regrid</a>). Outside of <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>,
these weights are then modified for masked cells (if required)
and the regridded data are created as the dot product of the
weights with the source data. (Note that whilst the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
package is also able to create the regridded data from its
weights, this feature can’t be integrated with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code>
framework that underpins the field’s data.)</p>
<p><strong>Logging</strong></p>
<p>Whether <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code> logging is enabled or not is determined by
<a class="reference internal" href="../function/cf.regrid_logging.html#cf.regrid_logging" title="cf.regrid_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.regrid_logging</span></code></a>. If it is enabled then logging takes place
after every call. By default logging is disabled.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cf.Field.regrids.html#cf.Field.regrids" title="cf.Field.regrids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regrids</span></code></a></p>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt>dst: <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>, <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a> or sequence of <a class="reference internal" href="../class/cf.DimensionCoordinate.html#cf.DimensionCoordinate" title="cf.DimensionCoordinate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DimensionCoordinate</span></code></a></dt><dd><p>The definition of the destination grid on which to
regrid the field’s data. One of:</p>
<ul>
<li><p><a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>: The grid is defined by the coordinates of
the field construct’s domain.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>: The grid is defined by the coordinates of
the domain construct.</p></li>
<li><p>Sequence of <a class="reference internal" href="../class/cf.DimensionCoordinate.html#cf.DimensionCoordinate" title="cf.DimensionCoordinate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">DimensionCoordinate</span></code></a>: The grid is
defined by between one and three 1-d dimension
coordinate constructs that define the coordinates of
the destination grid. The order of the coordinate
constructs <strong>must</strong> match the order of source field
regridding axes defined by the <em>src_axes</em> or <em>axes</em>
parameter.</p></li>
<li><p><a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>: The grid is defined by a regrid
operator that has been returned by a previous call
with the <em>return_operator</em> parameter set to True.</p>
<p>Unlike the other options, for which the regrid
weights need to be calculated, the regrid operator
already contains the weights. Therefore, for cases
where multiple fields with the same source grids
need to be regridded to the same destination grid,
using a regrid operator can give performance
improvements by avoiding having to calculate the
weights for each source field. Note that for the
other types of <em>dst</em> parameter, the calculation of
the regrid weights is not a lazy operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The source grid of the regrid operator is
immediately checked for compatibility with
the grid of the source field. By default
only the computationally cheap tests are
performed (checking that the coordinate
system, cyclicity and grid shape are the
same), with the grid coordinates not being
checked. The coordinates check will be
carried out, however, if the
<em>check_coordinates</em> parameter is True.</p>
</div>
</li>
</ul>
</dd>
<dt>method: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>Specify the regridding interpolation method. This
parameter must be set unless <em>dst</em> is a
<a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>, when the <em>method</em> is ignored.</p>
<p>The <em>method</em> parameter may be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'linear'</span></code>: Bilinear interpolation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'bilinear'</span></code>: Deprecated alias for <code class="docutils literal notranslate"><span class="pre">'linear'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative_1st'</span></code>: First order conservative
interpolation. Preserves the area integral of the
data across the interpolation from source to
destination. It uses the proportion of the area of
the overlapping source and destination cells to
determine appropriate weights.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative'</span></code>: Alias for <code class="docutils literal notranslate"><span class="pre">'conservative_1st'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative_2nd'</span></code>: Second-order conservative
interpolation. As with first order conservative
interpolation, preserves the area integral of the
field between source and destination using a
weighted sum, with weights based on the
proportionate area of intersection. In addition the
second-order conservative method takes the source
gradient into account, so it yields a smoother
destination field that typically better matches the
source data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'patch'</span></code> Patch recovery interpolation. A second
degree 2-d polynomial regridding method, which uses
a least squares algorithm to calculate the
polynomials. This method typically results in
better approximations to values and derivatives when
compared to bilinear interpolation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'nearest_stod'</span></code>: Nearest neighbour interpolation
for which each destination point is mapped to the
closest source point. Useful for extrapolation of
categorical data. Some destination cells may be
unmapped.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'nearest_dtos'</span></code>: Nearest neighbour interpolation
for which each source point is mapped to the
destination point. Useful for extrapolation of
categorical data. All destination cells will be
mapped.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>: This is the default and can only be used
when <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p></li>
</ul>
</dd>
<dt>use_src_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>By default the mask of the source field is taken into
account during the regridding process. The only
possible exception to this is when the nearest source
to destination regridding method (<code class="docutils literal notranslate"><span class="pre">'nearest_stod'</span></code>)
is being used. In this case, if <em>use_src_mask</em> is
False then each destination point is mapped to the
closest source point, whether or not it is masked (see
the <em>method</em> parameter for details).</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
</dd>
<dt>use_dst_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If <em>dst</em> is a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> and <em>use_dst_mask</em> is False (the
default) then the mask of data on the destination grid
is <strong>not</strong> taken into account when performing
regridding. If <em>use_dst_mask</em> is True then any masked
cells in the <em>dst</em> field construct are transferred to
the result. If <em>dst</em> has more dimensions than are
being regridded, then the mask of the destination grid
is taken as the subspace defined by index <code class="docutils literal notranslate"><span class="pre">0</span></code> of all
the non-regridding dimensions.</p>
<p>Ignored if <em>dst</em> is not a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
</dd>
<dt>src_axes: sequence, optional</dt><dd><p>Define the source grid axes to be regridded. The
sequence of between one and three values identify
unique domain axes by passing each axis description to
a call of the source field construct’s <a class="reference internal" href="cf.Field.domain_axis.html#cf.Field.domain_axis" title="cf.Field.domain_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">domain_axis</span></code></a>
method. For example, for a value of <code class="docutils literal notranslate"><span class="pre">'ncdim%x'</span></code>, the
domain axis construct returned by
<code class="docutils literal notranslate"><span class="pre">f.domain_axis('ncdim%x')</span></code> is selected.</p>
<p>Must have the same number of values as the <em>dst_axes</em>
parameter, if set, and the source and destination
regridding axes must be specified in the same
order. See the <em>axes</em> parameter.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">['T']</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0]</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.14.0.</span></p>
</div>
</dd>
<dt>dst_axes: <code class="xref py py-obj docutils literal notranslate"><span class="pre">sequence</span></code>, optional</dt><dd><p>When the destination grid is defined by a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>, define the destination grid axes to be
regridded. The sequence of between one and three
values identify unique domain axes by passing each
axis description to a call of the destination field or
domain construct’s <a class="reference internal" href="cf.Field.domain_axis.html#cf.Field.domain_axis" title="cf.Field.domain_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">domain_axis</span></code></a> method. For example,
for a value of <code class="docutils literal notranslate"><span class="pre">'ncdim%x'</span></code>, the domain axis
construct returned by <code class="docutils literal notranslate"><span class="pre">g.domain_axis('ncdim%x')</span></code> is
selected.</p>
<p>Must have the same number of values as the <em>src_axes</em>
parameter, if set, and the source and destination
regridding axes must be specified in the same
order. See the <em>axes</em> parameter.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">['T']</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0]</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.14.0.</span></p>
</div>
</dd>
<dt>axes: optional</dt><dd><p>Define the axes to be regridded for the source grid
and, if <em>dst</em> is a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>, the
destination grid. The <em>axes</em> parameter is a
convenience that may be used to replace <em>src_axes</em> and
<em>dst_axes</em> when they would contain identical
sequences. It may also be used in place of <em>src_axes</em>
if <em>dst_axes</em> is not required.</p>
</dd>
<dt>ignore_degenerate: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>For conservative regridding methods, if True (the
default) then degenerate cells (those for which enough
vertices collapse to leave a cell as either a line or
a point) are skipped, not producing a result.
Otherwise an error will be produced if degenerate
cells are found, that will be present in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
log files.</p>
<p>For all other regridding methods, degenerate cells are
always skipped, regardless of the value of
<em>ignore_degenerate</em>.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
</dd>
<dt>return_operator: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then do not perform the regridding, rather
return the <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a> instance that defines the
regridding operation, and which can be used in
subsequent calls. See the <em>dst</em> parameter for
details.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.10.0.</span></p>
</div>
</dd>
<dt>check_coordinates: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True and <em>dst</em> is a <a href="#id1"><span class="problematic" id="id2">`</span></a>RegridOperator`then the source
grid coordinates defined by the operator are checked
for compatibility against those of the source field. By
default this check is not carried out. See the <em>dst</em>
parameter for details.</p>
<p>Ignored unless <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.14.0.</span></p>
</div>
</dd>
<dt>min_weight: float, optional</dt><dd><p>A very small non-negative number. By default
<em>min_weight</em> is <code class="docutils literal notranslate"><span class="pre">2.5</span> <span class="pre">*</span> <span class="pre">np.finfo(&quot;float64&quot;).eps</span></code>,
i.e. <code class="docutils literal notranslate"><span class="pre">5.551115123125783e-16</span></code>. It is used during
linear and first-order conservative regridding when
adjusting the weights matrix to account for the data
mask. It is ignored for all other regrid methods, or
if data being regridded has no missing values.</p>
<p>In some cases (described below) for which weights
might only be non-zero as a result of rounding errors,
the <em>min_weight</em> parameter controls whether or a not
cell in the regridded field is masked.</p>
<p>The default value has been chosen empirically as the
smallest value that produces the same masks as <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
for the use cases defined in the cf test suite.</p>
<p>Define <code class="docutils literal notranslate"><span class="pre">w_ji</span></code> as the multiplicative weight that
defines how much of <code class="docutils literal notranslate"><span class="pre">Vs_i</span></code> (the value in source grid
cell <code class="docutils literal notranslate"><span class="pre">i</span></code>) contributes to <code class="docutils literal notranslate"><span class="pre">Vd_j</span></code> (the value in
destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code>).</p>
<p><strong>Linear regridding</strong></p>
<p>Destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code> will only be masked if a)
it is masked in the destination grid definition; or b)
<code class="docutils literal notranslate"><span class="pre">w_ji</span> <span class="pre">&gt;=</span> <span class="pre">min_weight</span></code> for those masked source grid
cells <code class="docutils literal notranslate"><span class="pre">i</span></code> for which <code class="docutils literal notranslate"><span class="pre">w_ji</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>.</p>
<p><strong>Conservative first-order regridding</strong></p>
<p>Destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code> will only be masked if a)
it is masked in the destination grid definition; or b)
the sum of <code class="docutils literal notranslate"><span class="pre">w_ji</span></code> for all non-masked source grid
cells <code class="docutils literal notranslate"><span class="pre">i</span></code> is strictly less than <em>min_weight</em>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.14.0.</span></p>
</div>
</dd>
<dt>weights_file: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>Provide a netCDF file that contains, or will contain,
the regridding weights. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default) then
the weights are computed in memory for regridding
between the source and destination grids, and no file
is created.</p>
<p>If set to a file path that does not exist then the
weights will be computed and also written to that
file.</p>
<p>If set to a file path that already exists then the
weights will be read from this file, instead of being
computed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No checks are performed on an existing file
to ensure that the weights are appropriate
for the source field and the values of the
keyword parameters. Inappropriate weights
will produce incorrect results.</p>
<p>However, when regridding using weights from
a file, ensuring that the source field has
the same shape over the regridding axes, and
the parameter settings are the same as those
used when the weights file was created, will
ensure correct results.</p>
<p>A netCDF regridding weights file created
directly by ESMF has the same structure and
variable names (<code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">row</span></code>, and <code class="docutils literal notranslate"><span class="pre">col</span></code>
for the weights, destination/row indices,
and source/col indices respectively), so may
be provided as a <em>weights_file</em>, noting that
no checks will be applied to it.</p>
</div>
<p><strong>Performance</strong></p>
<p>The computation of the weights can be much more costly
than the regridding itself, in which case reading
pre-calculated weights can improve performance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.15.2.</span></p>
</div>
</dd>
<dt>inplace: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then do the operation in-place and return
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
<dt>axis_order: sequence, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>fracfield: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>_compute_field_mass: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>i: deprecated at version 3.0.0</dt><dd><p>Use the <em>inplace</em> parameter instead.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a></dt><dd><p>The regridded field construct; or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.12)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the
operation was in-place; or the regridding operator if
<em>return_operator</em> is True.</p>
</dd>
</dl>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">example_fields</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="go">Field: air_temperature (ncvar%ta)</span>
<span class="go">---------------------------------</span>
<span class="go">Data            : air_temperature(atmosphere_hybrid_height_coordinate(1), grid_latitude(10), grid_longitude(9)) K</span>
<span class="go">Cell methods    : grid_latitude(10): grid_longitude(9): mean where land (interval: 0.1 degrees) time(1): maximum</span>
<span class="go">Field ancils    : air_temperature standard_error(grid_latitude(10), grid_longitude(9)) = [[0.76, ..., 0.32]] K</span>
<span class="go">Dimension coords: atmosphere_hybrid_height_coordinate(1) = [1.5]</span>
<span class="go">                : grid_latitude(10) = [2.2, ..., -1.76] degrees</span>
<span class="go">                : grid_longitude(9) = [-4.7, ..., -1.18] degrees</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="go">Auxiliary coords: latitude(grid_latitude(10), grid_longitude(9)) = [[53.941, ..., 50.225]] degrees_N</span>
<span class="go">                : longitude(grid_longitude(9), grid_latitude(10)) = [[2.004, ..., 8.156]] degrees_E</span>
<span class="go">                : long_name=Grid latitude name(grid_latitude(10)) = [--, ..., kappa]</span>
<span class="go">Cell measures   : measure:area(grid_longitude(9), grid_latitude(10)) = [[2391.9657, ..., 2392.6009]] km2</span>
<span class="go">Coord references: grid_mapping_name:rotated_latitude_longitude</span>
<span class="go">                : standard_name:atmosphere_hybrid_height_coordinate</span>
<span class="go">Domain ancils   : ncvar%a(atmosphere_hybrid_height_coordinate(1)) = [10.0] m</span>
<span class="go">                : ncvar%b(atmosphere_hybrid_height_coordinate(1)) = [20.0]</span>
<span class="go">                : surface_altitude(grid_latitude(10), grid_longitude(9)) = [[0.0, ..., 270.0]] m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<span class="go">Field: specific_humidity (ncvar%q)</span>
<span class="go">----------------------------------</span>
<span class="go">Data            : specific_humidity(latitude(5), longitude(8)) 1</span>
<span class="go">Cell methods    : area: mean</span>
<span class="go">Dimension coords: latitude(5) = [-75.0, ..., 75.0] degrees_north</span>
<span class="go">                : longitude(8) = [22.5, ..., 337.5] degrees_east</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">Field: air_temperature (ncvar%ta)</span>
<span class="go">---------------------------------</span>
<span class="go">Data            : air_temperature(atmosphere_hybrid_height_coordinate(1), latitude(5), grid_longitude(9)) K</span>
<span class="go">Cell methods    : latitude(5): grid_longitude(9): mean where land (interval: 0.1 degrees) time(1): maximum</span>
<span class="go">Dimension coords: atmosphere_hybrid_height_coordinate(1) = [1.5]</span>
<span class="go">                : latitude(5) = [-75.0, ..., 75.0] degrees_north</span>
<span class="go">                : grid_longitude(9) = [-4.7, ..., -1.18] degrees</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="go">Coord references: standard_name:atmosphere_hybrid_height_coordinate</span>
<span class="go">Domain ancils   : ncvar%a(atmosphere_hybrid_height_coordinate(1)) = [10.0] m</span>
<span class="go">                : ncvar%b(atmosphere_hybrid_height_coordinate(1)) = [20.0]</span>
<span class="go">                : surface_altitude(latitude(5), grid_longitude(9)) = [[--, ..., --]] m</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Y&#39;</span><span class="p">],</span> <span class="n">return_operator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regridc</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2024, NCAS | Page built on 2024-03-01.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
    </div>

    

    
  </body>
</html>