<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>cf.Field.regrids &#8212; Documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b3523f8e" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=541523b4" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=ca3c1c84" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=e5fbc548" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/customise-alabaster.css?v=5dec66a6" />
    <script src="../_static/documentation_options.js?v=5318ce95"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=b578dfe4"></script>
    <script src="../_static/toggleprompt.js?v=1b41717f"></script>
    <link rel="icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Field.day" href="../attribute/cf.Field.day.html" />
    <link rel="prev" title="cf.Field.regridc" href="cf.Field.regridc.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo of Python cf package"/>
            </a></p>



<h1 class="logo"><a href="../index.html">cf 3.18.2</a></h1>



<p class="blurb">A CF-compliant earth science data analysis library</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=NCAS-CMS&repo=cf-python&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>






<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheat_sheet.html"><strong>Cheat Sheet</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/index.html"><strong>Recipes using cf</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation_rules.html"><strong>Aggregation rules</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html"><strong>Contributing</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cf classes</strong></a><ul>
  <li><a href="../class/cf.Field.html">cf.Field</a><ul>
      <li>Previous: <a href="cf.Field.regridc.html" title="previous chapter">cf.Field.regridc</a></li>
      <li>Next: <a href="../attribute/cf.Field.day.html" title="next chapter">cf.Field.day</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>

<br>
cf development has been supported by
the <a href="https://erc.europa.eu/">ERC</a>
through <a href="https://cordis.europa.eu/project/id/247220">Seachange</a>
and
<a href="https://cordis.europa.eu/project/id/786427">Couplet</a>; by
the <a href="https://ec.europa.eu/programmes/horizon2020/">EC Horizon
2020 programme</a> through
<a href="https://cordis.europa.eu/project/id/824084">IS-ENES3</a>;
by <a href="https://nerc.ukri.org/">NERC</a> through
<a href="https://gtr.ukri.org/project/0D95A6DB-0B95-48F7-8A8B-7B9A47DEA117">UKFAFMIP</a>;
and by <a href="https://ncas.ac.uk/">NCAS</a>.
<br>
<br>
<img src="../_templates/logo_EC.png" height="40">
<img src="../_templates/logo_ERC.png" height="40">
<img src="../_templates/logo_NERC.png" height="40">
<br>
<img src="../_templates/logo_NCAS.png" height="40">
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="cf-field-regrids">
<h1>cf.Field.regrids<a class="headerlink" href="#cf-field-regrids" title="Link to this heading">Â¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="cf.Field.regrids">
<span class="sig-prename descclassname"><span class="pre">Field.</span></span><span class="sig-name descname"><span class="pre">regrids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dst</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_cyclic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_cyclic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_src_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_dst_mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fracfield</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_degenerate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">check_coordinates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ln_z</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_esmpy_regrid_operator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dst_grid_partitions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inplace</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_compute_field_mass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cf-python/blob/v3.18.2/cf/field.py#L12943-L13320"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cf.Field.regrids" title="Link to this definition">Â¶</a></dt>
<dd><p>Regrid the field to a new latitude and longitude grid.</p>
<p>Regridding is the process of interpolating the field data
values while preserving the qualities of the original data,
and the metadata of the unaffected axes. The metadata for the
regridded axes are taken from the <em>dst</em> parameter.</p>
<p>The 2-d or 3-d regridding takes place on a sphere, with the
grid being defined by latitude and longitude spherical polar
coordinates, and any available vertical coordinates. In the
3-d case, the regridding may be done assuming linear or log
linear weights in the vertical.</p>
<p><strong>Latitude and longitude coordinates</strong></p>
<p>The source and destination grids of the regridding must both
be defined by latitude and longitude coordinates, which may be
1-d dimension coordinates or 2-d auxiliary coordinates. These
are automatically detected from the field being regridded and
the specification of the destination grid given by the <em>dst</em>
parameter.</p>
<p>When a grid is defined by 2-d latitude and longitude
coordinates, it is necessary for their X and Y dimensions to
be defined. This is either automatically inferred from the
existence of 1-d dimension coordinates, or else must be
specified with <em>src_axes</em> or <em>dst_axes</em> parameters.</p>
<p><strong>Curvilinear Grids</strong></p>
<p>Grids in projection coordinate systems can be regridded as
long as two dimensional latitude and longitude coordinates are
present.</p>
<p><strong>Tripolar Grids</strong></p>
<p>Connections across the bipole fold are not currently
supported, but are not necessary in some cases, for example if
the points on either side are together without a gap (as is
the case for NEMO model outputs).</p>
<p><strong>UGRID meshes</strong></p>
<p>Data defined on UGRID face or node cells may be regridded to
any other latitude-longitude grid, including other UGRID
meshes and DSG feature types.</p>
<p><strong>DSG feature types</strong></p>
<p>Data on any latitude-longitude grid (including tripolar and
UGRID meshes) may be regridded to any DSG feature type.</p>
<p><strong>Cyclicity of the X axis</strong></p>
<p>The cyclicity of the X (longitude) axes of the source and
destination grids (i.e. whether or not the first and last
cells of the axis are adjacent) are taken into account. By
default, the cyclicity is inferred from the gridsâ defining
coordinates, but may be also be provided with the <em>src_cyclic</em>
and <em>dst_cyclic</em> parameters.</p>
<p><strong>Masked cells</strong></p>
<p>By default, the data mask of the source data is taken into
account during the regridding process, but the destination
grid mask is not. This behaviour may be changed with the
<em>use_src_mask</em> and <em>use_dst_mask</em> parameters.</p>
<p>In general the source data may be arbitrarily masked, meaning
that the mask for the regridding axes may vary along the
non-regridding axes. The exceptions to this are for
second-order conservative, patch recovery regridding, and
nearest source to destination methods, for which the mask of
the regridding axes must be the same across all non-regridding
axes. In these special cases an exception will be raised if
the source data mask does not meet this requirement.</p>
<p><strong>Implementation</strong></p>
<p>The interpolation is carried out using regridding weights
calculated by the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code> package, a Python interface to the
Earth System Modeling Framework regridding utility (ESMF,
<a class="reference external" href="https://earthsystemmodeling.org/regrid">https://earthsystemmodeling.org/regrid</a>). Outside of <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>,
these weights are then modified for masked cells (if required)
and the regridded data are created as the dot product of the
weights with the source data. (Note that whilst the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
package is also able to create the regridded data from its
weights, this feature canât be integrated with the <code class="xref py py-obj docutils literal notranslate"><span class="pre">dask</span></code>
framework that underpins the fieldâs data.)</p>
<p>The calculation of weights for large grids can have a very
high memory requirement, but this can be reduced by setting
the <em>dst_grid_partitions</em> parameter.</p>
<p><strong>Logging</strong></p>
<p>Whether <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code> logging is enabled or not is determined by
<a class="reference internal" href="../function/cf.regrid_logging.html#cf.regrid_logging" title="cf.regrid_logging"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.regrid_logging</span></code></a>. If it is enabled then logging takes place
after every call. By default logging is disabled.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 1.0.4.</span></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="cf.Field.regridc.html#cf.Field.regridc" title="cf.Field.regridc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">regridc</span></code></a></p>
</div>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt>dst: <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>, <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a> or sequence of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Coordinate</span></code></dt><dd><p>The definition of the destination grid on which to
regrid the fieldâs data. One of:</p>
<ul>
<li><p><a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>: The grid is defined by the latitude and
longitude coordinates of the field constructâs
domain.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>: The grid is defined by the latitude and
longitude coordinates of the domain construct.</p></li>
<li><p>Sequence of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Coordinate</span></code>: The grid is defined by two
1-d dimension coordinate constructs, or two 2-d
auxiliary coordinate constructs, that define the
spherical latitude and longitude coordinates (in any
order) of the destination grid.</p>
<p>In the 2-d case, both coordinate constructs must
have their axes in the same order, which must be
specified by the <em>dst_axes</em> parameter.</p>
</li>
<li><p><a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>: The grid is defined by a regrid
operator that has been returned by a previous call
with the <em>return_operator</em> parameter set to True.</p>
<p>Unlike the other options, for which the regrid
weights need to be calculated, the regrid operator
already contains the weights. Therefore, for cases
where multiple fields with the same source grids
need to be regridded to the same destination grid,
using a regrid operator can give performance
improvements by avoiding having to calculate the
weights for each source field. Note that for the
other types of <em>dst</em> parameter, the calculation of
the regrid weights is not a lazy operation.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>, the
source grid of the regrid operator is
immediately checked for compatibility with
the grid of the source field. By default
only the computationally cheap tests are
performed (checking that the coordinate
system, cyclicity, grid shape, regridding
dimensionality, mesh location, and feature
type are the same), with the grid
coordinates not being checked. The
coordinates check will be carried out,
however, if the <em>check_coordinates</em>
parameter is True.</p>
</div>
</div></blockquote>
</li>
</ul>
</dd>
<dt>method: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>Specify the regridding interpolation method. This
parameter must be set unless <em>dst</em> is a
<a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>, when the <em>method</em> is ignored.</p>
<p>The <em>method</em> parameter may be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'linear'</span></code>: Bilinear interpolation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'bilinear'</span></code>: Deprecated alias for <code class="docutils literal notranslate"><span class="pre">'linear'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative_1st'</span></code>: First order conservative
interpolation. Preserves the integral of the source
field across the regridding. Weight calculation is
based on the ratio of source cell area overlapped
with the corresponding destination cell area.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative'</span></code>: Alias for <code class="docutils literal notranslate"><span class="pre">'conservative_1st'</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'conservative_2nd'</span></code>: Second-order conservative
interpolation. Preserves the integral of the source
field across the regridding. Weight calculation is
based on the ratio of source cell area overlapped
with the corresponding destination cell area. The
second-order conservative calculation also includes
the gradient across the source cell, so in general
it gives a smoother, more accurate representation of
the source field. This is particularly true when
going from a coarse to finer grid.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'patch'</span></code> Patch recovery interpolation. Patch
rendezvous method of taking the least squares fit of
the surrounding surface patches. This is a higher
order method that may produce interpolation weights
that may be slightly less than 0 or slightly greater
than 1. This method typically results in better
approximations to values and derivatives when
compared to bilinear interpolation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'nearest_stod'</span></code>: Nearest neighbour source to
destination interpolation for which each destination
point is mapped to the closest source point. A
source point can be mapped to multiple destination
points. Useful for regridding categorical data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'nearest_dtos'</span></code>: Nearest neighbour destination to
source interpolation for which each source point is
mapped to the closest destination point. A
destination point can be mapped to multiple source
points. Some destination points may not be
mapped. Each regridded value is the sum of its
contributing source elements. Useful for binning or
for categorical data.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>: This is the default and can only be used
when <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p></li>
</ul>
</dd>
<dt>src_cyclic: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>Specifies whether or not the source grid longitude
axis is cyclic (i.e. the first and last cells of the
axis are adjacent). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default) then the
cyclicity will be inferred from the source grid
coordinates, defaulting to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if it can not be
determined.</p>
</dd>
<dt>dst_cyclic: <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>Specifies whether or not the destination grid
longitude axis is cyclic (i.e. the first and last
cells of the axis are adjacent). If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the
default) then the cyclicity will be inferred from the
destination grid coordinates, defaulting to <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a> if
it can not be determined.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
</dd>
<dt>use_src_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>By default the mask of the source field is taken into
account during the regridding process. The only
possible exception to this is when the nearest source
to destination regridding method (<code class="docutils literal notranslate"><span class="pre">'nearest_stod'</span></code>)
is being used. In this case, if <em>use_src_mask</em> is
False then each destination point is mapped to the
closest source point, whether or not it is masked (see
the <em>method</em> parameter for details).</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
</dd>
<dt>use_dst_mask: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If <em>dst</em> is a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> and <em>use_dst_mask</em> is False (the
default) then the mask of data on the destination grid
is <strong>not</strong> taken into account when performing
regridding. If <em>use_dst_mask</em> is True then any masked
cells in the <em>dst</em> field construct are transferred to
the result. If <em>dst</em> has more dimensions than are
being regridded, then the mask of the destination grid
is taken as the subspace defined by index <code class="docutils literal notranslate"><span class="pre">0</span></code> of all
the non-regridding dimensions.</p>
<p>Ignored if <em>dst</em> is not a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a>.</p>
</dd>
<dt>src_axes: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>When the source gridâs X and Y dimensions can not be
inferred from the existence of 1-d dimension
coordinates, then they must be identified with the
<em>src_axes</em> dictionary, with keys <code class="docutils literal notranslate"><span class="pre">'X'</span></code> and <code class="docutils literal notranslate"><span class="pre">'Y'</span></code>.</p>
<p>The dictionary values identify a unique domain axis by
passing the given axis description to a call of the
field constructâs <a class="reference internal" href="cf.Field.domain_axis.html#cf.Field.domain_axis" title="cf.Field.domain_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">domain_axis</span></code></a> method. For example,
for a value of <code class="docutils literal notranslate"><span class="pre">'ncdim%x'</span></code>, the domain axis
construct returned by <code class="docutils literal notranslate"><span class="pre">f.domain_axis('ncdim%x')</span></code> is
selected.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'X':</span> <span class="pre">'ncdim%x',</span> <span class="pre">'Y':</span> <span class="pre">'ncdim%y'}</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'X':</span> <span class="pre">1,</span> <span class="pre">'Y':</span> <span class="pre">0}</span></code></p>
</dd>
</dl>
</dd>
<dt>dst_axes: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>When the destination gridâs X and Y dimensions can not
be inferred from the existence of 1-d dimension
coordinates, then they must be identified with the
<em>dst_axes</em> dictionary, with keys <code class="docutils literal notranslate"><span class="pre">'X'</span></code> and <code class="docutils literal notranslate"><span class="pre">'Y'</span></code>.</p>
<p>If <em>dst</em> is a <a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">Domain</span></code>, then the dictionary
values identify a unique domain axis by passing the
given axis description to a call of the destination
field or domain constructâs <a class="reference internal" href="cf.Field.domain_axis.html#cf.Field.domain_axis" title="cf.Field.domain_axis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">domain_axis</span></code></a> method. For
example, for a value of <code class="docutils literal notranslate"><span class="pre">'ncdim%x'</span></code>, the domain axis
construct returned by <code class="docutils literal notranslate"><span class="pre">f.domain_axis('ncdim%x')</span></code> is
selected.</p>
<p>If <em>dst</em> is a sequence of <code class="xref py py-obj docutils literal notranslate"><span class="pre">Coordinate</span></code>, then the
dictionary values identify a unique domain axis by its
position in the 2-d coordinatesâ data arrays, i.e. the
dictionary values must be <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code>:</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<dl class="simple">
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'X':</span> <span class="pre">'ncdim%x',</span> <span class="pre">'Y':</span> <span class="pre">'ncdim%y'}</span></code></p>
</dd>
<dt><em>Parameter example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">{'X':</span> <span class="pre">1,</span> <span class="pre">'Y':</span> <span class="pre">0}</span></code></p>
</dd>
</dl>
</dd>
<dt>ignore_degenerate: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>For conservative regridding methods, if True (the
default) then degenerate cells (those for which enough
vertices collapse to leave a cell as either a line or
a point) are skipped, not producing a result.
Otherwise an error will be produced if degenerate
cells are found, that will be present in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
log files.</p>
<p>For all other regridding methods, degenerate cells are
always skipped, regardless of the value of
<em>ignore_degenerate</em>.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
</dd>
<dt>return_operator: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then do not perform the regridding, rather
return the <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a> instance that defines the
regridding operation, and which can be used in
subsequent calls. See the <em>dst</em> parameter for
details.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.10.0.</span></p>
</div>
</dd>
<dt>check_coordinates: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True and <em>dst</em> is a <a href="#id1"><span class="problematic" id="id2">`</span></a>RegridOperator`then the source
grid coordinates defined by the operator are checked
for compatibility against those of the source field. By
default this check is not carried out. See the <em>dst</em>
parameter for details.</p>
<p>Ignored unless <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.14.0.</span></p>
</div>
</dd>
<dt>min_weight: float, optional</dt><dd><p>A very small non-negative number. By default
<em>min_weight</em> is <code class="docutils literal notranslate"><span class="pre">2.5</span> <span class="pre">*</span> <span class="pre">np.finfo(&quot;float64&quot;).eps</span></code>,
i.e. <code class="docutils literal notranslate"><span class="pre">5.551115123125783e-16</span></code>. It is used during
linear and first-order conservative regridding when
adjusting the weights matrix to account for the data
mask. It is ignored for all other regrid methods, or
if data being regridded has no missing values.</p>
<p>In some cases (described below) for which weights
might only be non-zero as a result of rounding errors,
the <em>min_weight</em> parameter controls whether or a not
cell in the regridded field is masked.</p>
<p>The default value has been chosen empirically as the
smallest value that produces the same masks as <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy</span></code>
for the use cases defined in the cf test suite.</p>
<p>Define <code class="docutils literal notranslate"><span class="pre">w_ji</span></code> as the multiplicative weight that
defines how much of <code class="docutils literal notranslate"><span class="pre">Vs_i</span></code> (the value in source grid
cell <code class="docutils literal notranslate"><span class="pre">i</span></code>) contributes to <code class="docutils literal notranslate"><span class="pre">Vd_j</span></code> (the value in
destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code>).</p>
<p><strong>Linear regridding</strong></p>
<p>Destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code> will only be masked if a)
it is masked in the destination grid definition; or b)
<code class="docutils literal notranslate"><span class="pre">w_ji</span> <span class="pre">&gt;=</span> <span class="pre">min_weight</span></code> for those masked source grid
cells <code class="docutils literal notranslate"><span class="pre">i</span></code> for which <code class="docutils literal notranslate"><span class="pre">w_ji</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>.</p>
<p><strong>Conservative first-order regridding</strong></p>
<p>Destination grid cell <code class="docutils literal notranslate"><span class="pre">j</span></code> will only be masked if a)
it is masked in the destination grid definition; or b)
the sum of <code class="docutils literal notranslate"><span class="pre">w_ji</span></code> for all non-masked source grid
cells <code class="docutils literal notranslate"><span class="pre">i</span></code> is strictly less than <em>min_weight</em>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.14.0.</span></p>
</div>
</dd>
<dt>weights_file: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>Provide a netCDF file that contains, or will contain,
the regridding weights. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default) then
the weights are computed in memory for regridding
between the source and destination grids, and no file
is created.</p>
<p>If set to a file path that does not exist then the
weights will be computed and also written to that
file.</p>
<p>If set to a file path that already exists then the
weights will be read from this file, instead of being
computed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No checks are performed on an existing file
to ensure that the weights are appropriate
for the source field and the values of the
keyword parameters. Inappropriate weights
will produce incorrect results.</p>
<p>However, when regridding using weights from
a file, ensuring that the source field has
the same shape over the regridding axes, and
the parameter settings are the same as those
used when the weights file was created, will
ensure correct results.</p>
<p>A netCDF regridding weights file created
directly by ESMF has the same structure and
variable names (<code class="docutils literal notranslate"><span class="pre">S</span></code>, <code class="docutils literal notranslate"><span class="pre">row</span></code>, and <code class="docutils literal notranslate"><span class="pre">col</span></code>
for the weights, destination/row indices,
and source/col indices respectively), so may
be provided as a <em>weights_file</em>, noting that
no checks will be applied to it.</p>
</div>
<p><strong>Performance</strong></p>
<p>The computation of the weights can take much longer,
and take much more memory, than the regridding itself,
in which case reading pre-calculated weights can
improve performance.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.15.2.</span></p>
</div>
</dd>
<dt>src_z: optional</dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the default, then the regridding is 2-d in
the latitude-longitude plane.</p>
<p>If not <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> then 3-d spherical regridding is enabled
by identifying the source grid vertical coordinates
from which to derive the vertical component of the
regridding weights. The vertical coordinate construct
may be 1-d or 3-d and is defined by the unique
construct returned by <code class="docutils literal notranslate"><span class="pre">f.coordinate(src_z)</span></code></p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.2.</span></p>
</div>
</dd>
<dt>dst_z: optional</dt><dd><p>If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the default, then the regridding is 2-d in
the latitude-longitude plane.</p>
<p>If not <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> then 3-d spherical regridding is enabled
by identifying the destination grid vertical
coordinates from which to derive the vertical
component of the regridding weights. The vertical
coordinate construct may be 1-d or 3-d.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.2.</span></p>
</div>
</dd>
<dt>z: optional</dt><dd><p>The <em>z</em> parameter is a convenience that may be used to
replace both <em>src_z</em> and <em>dst_z</em> when they would
contain identical values. If not <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> then 3-d
spherical regridding is enabled. See <em>src_z</em> and
<em>dst_z</em> for details.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<dl class="simple">
<dt><em>Example:</em></dt><dd><p><code class="docutils literal notranslate"><span class="pre">z='Z'</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">src_z='Z',</span> <span class="pre">dst_z='Z'</span></code>.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.2.</span></p>
</div>
</dd>
<dt>ln_z: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>If True when <em>z</em>, <em>src_z</em> or <em>dst_z</em> are also set,
calculate the vertical component of the regridding
weights using the natural logarithm of the vertical
coordinate values. This option should be used if the
quantity being regridded varies approximately linearly
with logarithm of the vertical coordinates. If False,
then the weights are calculated using unaltered
vertical values. If <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, the default, then an
exception is raised if any of <em>z</em>, <em>src_z</em> or <em>dst_z</em>
have also been set.</p>
<p>Ignored if <em>dst</em> is a <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.2.</span></p>
</div>
</dd>
<dt>verbose: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, optional</dt><dd><p>If an integer from <code class="docutils literal notranslate"><span class="pre">-1</span></code> to <code class="docutils literal notranslate"><span class="pre">3</span></code>, or an equivalent
string equal ignoring case to one of:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">'DISABLE'</span></code> (<code class="docutils literal notranslate"><span class="pre">0</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'WARNING'</span></code> (<code class="docutils literal notranslate"><span class="pre">1</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'INFO'</span></code> (<code class="docutils literal notranslate"><span class="pre">2</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'DETAIL'</span></code> (<code class="docutils literal notranslate"><span class="pre">3</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'DEBUG'</span></code> (<code class="docutils literal notranslate"><span class="pre">-1</span></code>)</p></li>
</ul>
<p>set for the duration of the method call only as the
minimum cut-off for the verboseness level of displayed
output (log) messages, regardless of the
globally-configured <a class="reference internal" href="../function/cf.log_level.html#cf.log_level" title="cf.log_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.log_level</span></code></a>. Note that
increasing numerical value corresponds to increasing
verbosity, with the exception of <code class="docutils literal notranslate"><span class="pre">-1</span></code> as a special
case of maximal and extreme verbosity.</p>
<p>Otherwise, if <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (the default value), output
messages will be shown according to the value of the
<a class="reference internal" href="../function/cf.log_level.html#cf.log_level" title="cf.log_level"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.log_level</span></code></a> setting.</p>
<p>Overall, the higher a non-negative integer or
equivalent string that is set (up to a maximum of
<code class="docutils literal notranslate"><span class="pre">3</span></code>/<code class="docutils literal notranslate"><span class="pre">'DETAIL'</span></code>) for increasing verbosity, the more
description that is printed to convey information
about the operation.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.0.</span></p>
</div>
</dd>
<dt>inplace: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then do the operation in-place and return
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p>
</dd>
<dt>return_esmpy_regrid_operator: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>If True then do not perform the regridding, rather
return the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy.Regrid</span></code> instance that defines the
regridding operation.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.16.2.</span></p>
</div>
</dd>
</dl>
<p>dst_grid_partitions: <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a>, optional
Calculating the weights matrix for grids with a very large
number of source and/or destination grid points can
potentially require more memory than is
available. However, the memory requirement can be greatly
reduced by calculating weights separately for
non-overlapping partitions of the destination grid, and
then combining the weights from each partition to create
the final weights matrix. The more partitions there are,
the smaller the memory requirement for the weights
calculations, at the expense of the weights calculations
taking longer.</p>
<p>The <em>dst_grid_partitions</em> parameter sets the number of
destination grid partitions for the weights
calculations. The default value is <code class="docutils literal notranslate"><span class="pre">1</span></code>, i.e. one
partition for the entire destination grid, maximising
memory usage and minimising the calculation time. If the
string <code class="docutils literal notranslate"><span class="pre">'maximum'</span></code> is given then the largest possible
number of partitions of the destination grid will be used,
minimising memory usage and maximising the calculation
time. A positive integer specifies the exact number of
partitions, capped by the maximum allowed, allowing the
balance between memory usage and calculation time to be
adjusted.</p>
<p>The actual number of destination grid partitions and each
partitionâs shape, and weights calculation time and memory
requirement are displayed when <code class="docutils literal notranslate"><span class="pre">'DEBUG'</span></code> logging is
activated. See <em>verbose</em> for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<dl class="simple">
<dt>If setting <em>dst_grid_partitions</em> is required for</dt><dd><p>the regridding to work, then it is worth
considering storing the weights in a file for
fast future access, via the <em>weights_file</em>
parameter.</p>
</dd>
</dl>
<p>The maximum number of partitions, Nmax, depends on the
nature of the destination grid: If the Z axis is being
regridded, Nmax = the size of the Z axis. For a 2-d
structured grid, Nmax = the size of the Y axis. For a
UGRID, HEALPix, or DSG grid, Nmax = the size of the
horizontal discrete axis.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.18.2.</span></p>
</div>
</div>
<dl class="simple">
<dt>axis_order: sequence, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>fracfield: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>_compute_field_mass: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a>, optional</dt><dd><p>Deprecated at version 3.14.0.</p>
</dd>
<dt>i: deprecated at version 3.0.0</dt><dd><p>Use the <em>inplace</em> parameter instead.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><a class="reference internal" href="../class/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> or <a class="reference internal" href="../class/cf.RegridOperator.html#cf.RegridOperator" title="cf.RegridOperator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RegridOperator</span></code></a></dt><dd><p>The regridded field construct; or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.14)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> if the
operation was in-place; or the regridding operator if
<em>return_operator</em> is True; or the <code class="xref py py-obj docutils literal notranslate"><span class="pre">esmpy.Regrid</span></code> operator
object if <em>return_esmpy_regrid_operator</em> is True.</p>
</dd>
</dl>
</dd>
</dl>
<p><strong>Examples</strong></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">example_fields</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
<span class="go">Field: air_temperature (ncvar%ta)</span>
<span class="go">---------------------------------</span>
<span class="go">Data            : air_temperature(atmosphere_hybrid_height_coordinate(1), grid_latitude(10), grid_longitude(9)) K</span>
<span class="go">Cell methods    : grid_latitude(10): grid_longitude(9): mean where land (interval: 0.1 degrees) time(1): maximum</span>
<span class="go">Field ancils    : air_temperature standard_error(grid_latitude(10), grid_longitude(9)) = [[0.76, ..., 0.32]] K</span>
<span class="go">Dimension coords: atmosphere_hybrid_height_coordinate(1) = [1.5]</span>
<span class="go">                : grid_latitude(10) = [2.2, ..., -1.76] degrees</span>
<span class="go">                : grid_longitude(9) = [-4.7, ..., -1.18] degrees</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="go">Auxiliary coords: latitude(grid_latitude(10), grid_longitude(9)) = [[53.941, ..., 50.225]] degrees_N</span>
<span class="go">                : longitude(grid_longitude(9), grid_latitude(10)) = [[2.004, ..., 8.156]] degrees_E</span>
<span class="go">                : long_name=Grid latitude name(grid_latitude(10)) = [--, ..., kappa]</span>
<span class="go">Cell measures   : measure:area(grid_longitude(9), grid_latitude(10)) = [[2391.9657, ..., 2392.6009]] km2</span>
<span class="go">Coord references: grid_mapping_name:rotated_latitude_longitude</span>
<span class="go">                : standard_name:atmosphere_hybrid_height_coordinate</span>
<span class="go">Domain ancils   : ncvar%a(atmosphere_hybrid_height_coordinate(1)) = [10.0] m</span>
<span class="go">                : ncvar%b(atmosphere_hybrid_height_coordinate(1)) = [20.0]</span>
<span class="go">                : surface_altitude(grid_latitude(10), grid_longitude(9)) = [[0.0, ..., 270.0]] m</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">dst</span><span class="p">)</span>
<span class="go">Field: specific_humidity (ncvar%q)</span>
<span class="go">----------------------------------</span>
<span class="go">Data            : specific_humidity(latitude(5), longitude(8)) 1</span>
<span class="go">Cell methods    : area: mean</span>
<span class="go">Dimension coords: latitude(5) = [-75.0, ..., 75.0] degrees_north</span>
<span class="go">                : longitude(8) = [22.5, ..., 337.5] degrees_east</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regrids</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">Field: air_temperature (ncvar%ta)</span>
<span class="go">---------------------------------</span>
<span class="go">Data            : air_temperature(atmosphere_hybrid_height_coordinate(1), latitude(5), longitude(8)) K</span>
<span class="go">Cell methods    : latitude(5): longitude(8): mean where land (interval: 0.1 degrees) time(1): maximum</span>
<span class="go">Dimension coords: atmosphere_hybrid_height_coordinate(1) = [1.5]</span>
<span class="go">                : latitude(5) = [-75.0, ..., 75.0] degrees_north</span>
<span class="go">                : longitude(8) = [22.5, ..., 337.5] degrees_east</span>
<span class="go">                : time(1) = [2019-01-01 00:00:00]</span>
<span class="go">Coord references: standard_name:atmosphere_hybrid_height_coordinate</span>
<span class="go">Domain ancils   : ncvar%a(atmosphere_hybrid_height_coordinate(1)) = [10.0] m</span>
<span class="go">                : ncvar%b(atmosphere_hybrid_height_coordinate(1)) = [20.0]</span>
<span class="go">                : surface_altitude(latitude(5), longitude(8)) = [[--, ..., --]] m</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regrids</span><span class="p">(</span><span class="n">dst</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">return_operator</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">regrids</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2025, NCAS | Page built on 2025-10-16.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://github.com/sphinx-doc/alabaster">Alabaster 0.7.14</a>
      
    </div>

    

    
  </body>
</html>