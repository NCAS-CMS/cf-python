
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cf.Data.digitize &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Data.dumpd" href="cf.Data.dumpd.html" />
    <link rel="prev" title="cf.Data.dump" href="cf.Data.dump.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><b><a href="../index.html">cf 3.0.2</a></b></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf_data_model.html"><strong>CF data model</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation_rules.html"><strong>Aggregation rules</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Older releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cf classes</strong></a><ul>
  <li><a href="../classes/cf.Data.html">cf.Data</a><ul>
      <li>Previous: <a href="cf.Data.dump.html" title="previous chapter">cf.Data.dump</a></li>
      <li>Next: <a href="cf.Data.dumpd.html" title="next chapter">cf.Data.dumpd</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/method/cf.Data.digitize.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cf-data-digitize">
<h1>cf.Data.digitize<a class="headerlink" href="#cf-data-digitize" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cf.Data.digitize">
<code class="descclassname">Data.</code><code class="descname">digitize</code><span class="sig-paren">(</span><em>bins</em>, <em>upper=False</em>, <em>open_ends=False</em>, <em>return_bins=False</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cf-python/blob/v3.0.2/cf/data/data.py#L1964"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cf.Data.digitize" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the indices of the bins to which each value belongs.</p>
<p>Values (including masked values) that do not belong to any bin
result in masked values in the output data.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.2.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>bins: array_like</dt>
<dd><p class="first">The bin boundaries. One of:</p>
<ul class="last">
<li><p class="first">An integer.</p>
<p>Create this many equally sized, contiguous bins spanning
the range of the data. I.e. the smallest bin boundary is
the minimum of the data and the largest bin boundary is
the maximum of the data. In order to guarantee that each
data value lies inside a bin, the most extreme open
boundary is extended by multiplying it by <code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">-</span>
<span class="pre">epsilon</span></code> or <code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">+</span> <span class="pre">epsilon</span></code>, whichever extends the
boundary in the appropriate direction, where <code class="docutils literal notranslate"><span class="pre">epsilon</span></code>
is the smallest positive 64-bit float such that <code class="docutils literal notranslate"><span class="pre">1.0</span> <span class="pre">+</span>
<span class="pre">epsilson</span> <span class="pre">!=</span> <span class="pre">1.0</span></code>. I.e. if <em>upper</em> is False then the
largest upper bin boundary is made slightly larger and
if <em>upper</em> is True then the lowest lower bin boundary is
made slightly lower.</p>
</li>
<li><p class="first">A 1-d array of numbers.</p>
<p>When sorted into a monotonically increasing sequence,
each boundary, with the exception of the two end
boundaries, counts as the upper boundary of one bin and
the lower boundary of next. If the <em>open_ends</em> parameter
is True then the lowest lower bin boundary also defines
a left-open (i.e. not bounded below) bin, and the
largest upper bin boundary also defines a right-open
(i.e. not bounded above) bin.</p>
</li>
<li><p class="first">A 2-d array of numbers.</p>
<p>The second dimension, that must have size 2, contains
the lower and upper bin boundaries. Different bins may
share a boundary, but may not overlap. If the
<em>open_ends</em> parameter is True then the lowest lower bin
boundary also defines a left-open (i.e. not bounded
below) bin, and the largest upper bin boundary also
defines a right-open (i.e. not bounded above) bin.</p>
</li>
</ul>
</dd>
<dt>upper: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then each bin includes its upper bound but not its
lower bound. By default the opposite is applied, i.e. each
bin includes its lower bound but not its upper bound.</p>
</dd>
<dt>open_ends: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then create left-open (i.e. not bounded below) and
right-open (i.e. not bounded above) bins from the lowest
lower bin boundary and largest upper bin boundary
respectively. By default these bins are not created</p>
</dd>
<dt>return_bins: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then also return the bins in their 2-d form.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a>, [<a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a>]</dt>
<dd><p class="first">The indices of the bins to which each value belongs.</p>
<p class="last">If <em>return_bins</em> is True then also return the bins in
their 2-d form.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">Data</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="go">[[ 0  1  2  3]</span>
<span class="go"> [ 4  5  6  7]</span>
<span class="go"> [ 8  9 10 11]]</span>
</pre></div>
</div>
<p>Equivalant ways to create indices for the four bins <code class="docutils literal notranslate"><span class="pre">[-inf,</span> <span class="pre">2),</span>
<span class="pre">[2,</span> <span class="pre">6),</span> <span class="pre">[6,</span> <span class="pre">10),</span> <span class="pre">[10,</span> <span class="pre">inf)</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>  
<span class="go">[[0 0 1 1]</span>
<span class="go"> [1 1 2 2]</span>
<span class="go"> [2 2 3 3]]</span>
</pre></div>
</div>
<p>Equivalant ways to create indices for the two bins <code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">6],</span> <span class="pre">(6,</span> <span class="pre">10]</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">open_ends</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">]],</span> <span class="n">upper</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">open_ends</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[-- -- --  0]</span>
<span class="go"> [ 0  0  0  1]</span>
<span class="go"> [ 1  1  1 --]]</span>
</pre></div>
</div>
<p>Create indices for the two bins <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">6),</span> <span class="pre">[8,</span> <span class="pre">10)</span></code>, which are
non-contiguous</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[ 0 0  1  1]</span>
<span class="go"> [ 1 1 -- --]</span>
<span class="go"> [ 2 2  3  3]]</span>
</pre></div>
</div>
<p>Masked values result in masked indices in the output array.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cf</span><span class="o">.</span><span class="n">masked</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[ 0  1  2  3]</span>
<span class="go"> [ 4 --  6  7]</span>
<span class="go"> [ 8  9 10 11]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">digitize</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span><span class="o">.</span><span class="n">array</span><span class="p">)</span>
<span class="go">[[ 0  0  1  1]</span>
<span class="go"> [ 1 --  2  2]</span>
<span class="go"> [ 2  2  3  3]]</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, David Hassell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/method/cf.Data.digitize.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>