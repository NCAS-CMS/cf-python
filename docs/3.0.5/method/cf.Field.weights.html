
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>cf.Field.weights &#8212; Documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Field.exp" href="cf.Field.exp.html" />
    <link rel="prev" title="cf.Field.var" href="cf.Field.var.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><b><a href="../index.html">cf 3.0.5</a></b></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html"><strong>Introduction</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cf_data_model.html"><strong>CF data model</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html"><strong>Installation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html"><strong>Tutorial</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis.html"><strong>Analysis</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api_reference.html"><strong>API reference</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation_rules.html"><strong>Aggregation rules</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../performance.html"><strong>Performance</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html"><strong>Older releases</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Changelog.html"><strong>Change log</strong></a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api_reference.html"><strong>API reference</strong></a><ul>
  <li><a href="../class.html"><strong>cf classes</strong></a><ul>
  <li><a href="../classes/cf.Field.html">cf.Field</a><ul>
      <li>Previous: <a href="cf.Field.var.html" title="previous chapter">cf.Field.var</a></li>
      <li>Next: <a href="cf.Field.exp.html" title="next chapter">cf.Field.exp</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/method/cf.Field.weights.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="cf-field-weights">
<h1>cf.Field.weights<a class="headerlink" href="#cf-field-weights" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cf.Field.weights">
<code class="descclassname">Field.</code><code class="descname">weights</code><span class="sig-paren">(</span><em>weights='auto'</em>, <em>scale=None</em>, <em>measure=False</em>, <em>components=False</em>, <em>methods=False</em>, <em>radius='earth'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/NCAS-CMS/cf-python/blob/v3.0.5/cf/field.py#L4826"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cf.Field.weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Return weights for the data array values.</p>
<p>The weights are those used during a statistical collapse of the
data. For example when computing a area weight average.</p>
<p>Weights for any combination of axes may be returned.</p>
<p>Weights are either derived from the field construct’s metadata
(such as coordinate cell sizes) or provided explicitly in the form
of other <a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> constructs. In any case, the outer product of
these weights components is returned in a field which is
broadcastable to the orginal field (see the <em>components</em> parameter
for returning the components individually).</p>
<p>By default null, equal weights are returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="cf.Field.bin.html#cf.Field.bin" title="cf.Field.bin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bin</span></code></a>, <a class="reference internal" href="cf.Field.cell_area.html#cf.Field.cell_area" title="cf.Field.cell_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cell_area</span></code></a>, <a class="reference internal" href="cf.Field.collapse.html#cf.Field.collapse" title="cf.Field.collapse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">collapse</span></code></a>, <a class="reference internal" href="cf.Field.radius.html#cf.Field.radius" title="cf.Field.radius"><code class="xref py py-obj docutils literal notranslate"><span class="pre">radius</span></code></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>weights: <em>optional</em></dt>
<dd><p class="first">Specify the weights to be created. There are two distinct
methods: <strong>type 1</strong> will always succeed in creating
weights for all axes of the field, at the expense of not
always being able to control exactly how the weights are
created (see the <em>methods</em> parameter); <strong>type 2</strong> allows
particular types of weights to be defined for particular
axes, and an exception will be raised if it is not
possible to the create weights.</p>
<blockquote class="last">
<div><ul class="simple">
<li><strong>Type 1</strong>: <em>weights</em> may be one of:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>weights</em></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a></td>
<td>Equal weights for all axes. This the
default.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'auto'</span></code></td>
<td><p class="first">Weights are created for non-overlapping
subsets of the axes by the methods
enumerated in the above notes. Set the
<em>methods</em> parameter to find out how the
weights were actually created.</p>
<p>In this case weights components are created
for all axes of the field by one or more of
the following methods, in order of
preference,</p>
<blockquote>
<div><ol class="arabic simple">
<li>Volume cell measures</li>
<li>Area cell measures</li>
<li>Area calculated from (grid) latitude
and (grid) longitude dimension
coordinate constructs with bounds</li>
<li>Cell sizes of dimension coordinate
constructs with bounds</li>
<li>Equal weights</li>
</ol>
</div></blockquote>
<p class="last">and the outer product of these weights
components is returned in a field constructs
which is broadcastable to the orginal field
construct (see the <em>components</em> parameter).</p>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a></td>
<td>Explicit weights in a <a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a> object that
must be broadcastable to the field
construct’s data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a></td>
<td>Explicit weights from the data of another
field construct, which must be broadcastable
to this field construct’s data.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></td>
<td>Explicit weights in dictionary of the form
that is returned from a call to the
<a class="reference internal" href="#cf.Field.weights" title="cf.Field.weights"><code class="xref py py-obj docutils literal notranslate"><span class="pre">weights</span></code></a> method with <code class="docutils literal notranslate"><span class="pre">component=True</span></code></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>Type 2</strong>: <em>weights</em> may be one, or a sequence, of:</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>weights</em></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">'area'</span></code></td>
<td>Cell area weights from the field
construct’s area cell measure construct
or, if one doesn’t exist, from (grid)
latitude and (grid) longitude dimension
coordinate constructs. Set the <em>methods</em>
parameter to find out how the weights were
actually created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">'volume'</span></code></td>
<td>Cell volume weights from the field
construct’s volume cell measure construct.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a></td>
<td>Weights from the cell sizes of the
dimension coordinate construct with this
identity.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a></td>
<td>Explicit weights from the data of another
field construct, which must be
broadcastable to this field construct.</td>
</tr>
</tbody>
</table>
<p>If <em>weights</em> is a sequence of any combination of the
above then the returned field contains the outer product
of the weights defined by each element of the
sequence. The ordering of the sequence is irrelevant.</p>
<dl class="docutils">
<dt><em>Parameter example:</em></dt>
<dd><p class="first last">To create to 2-dimensional weights based on cell
areas: <code class="docutils literal notranslate"><span class="pre">f.weights('area')</span></code>. To create to
3-dimensional weights based on cell areas and linear
height: <code class="docutils literal notranslate"><span class="pre">f.weights(['area',</span> <span class="pre">'Z'])</span></code>.</p>
</dd>
</dl>
</div></blockquote>
</dd>
<dt>scale: number, optional</dt>
<dd><p class="first">If set to a positive number then scale the weights so that
they are less than or equal to that number. If weights
components have been requested (see the <em>components</em>
parameter) then each component is scaled independently of
the others.</p>
<dl class="last docutils">
<dt><em>Parameter example:</em></dt>
<dd><p class="first last">To scale all weights so that they lie between 0 and 1:
<code class="docutils literal notranslate"><span class="pre">scale=1</span></code>.</p>
</dd>
</dl>
</dd>
<dt>measure: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first">Create weights that are cell measures, i.e. which describe
actual cell sizes (e.g. cell areas) with appropriate units
(e.g. metres squared).</p>
<p>Cell measures can be created for any combination of
axes. For example, cell measures for a time axis are the
time span for each cell with canonical units of seconds;
cell measures for the combination of four axes
representing time and three dimensional space could have
canonical units of metres cubed seconds.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Specifying cell volume weights via
<code class="docutils literal notranslate"><span class="pre">weights=['X',</span> <span class="pre">'Y',</span> <span class="pre">'Z']</span></code> or
<code class="docutils literal notranslate"><span class="pre">weights=['area',</span> <span class="pre">'Z']</span></code> (or other equivalents)
will produce <strong>an incorrect result if the
vertical dimension coordinates do not define the
actual height or depth thickness of every cell
in the domain</strong>. In this case,
<code class="docutils literal notranslate"><span class="pre">weights='volume'</span></code> should be used instead,
which requires the field construct to have a
“volume” cell measure construct.</p>
</div>
</dd>
<dt>radius: optional</dt>
<dd><p class="first">Specify the radius used for calculating the areas of cells
defined in spherical polar coordinates. The radius is that
which would be returned by this call of the field
construct’s <a class="reference internal" href="cf.Field.radius.html#cf.Field.radius" title="cf.Field.radius"><code class="xref py py-obj docutils literal notranslate"><span class="pre">radius</span></code></a> method:
<code class="docutils literal notranslate"><span class="pre">f.radius(radius)</span></code>. See the <a class="reference internal" href="cf.Field.radius.html#cf.Field.radius" title="cf.Field.radius"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cf.Field.radius</span></code></a> for
details.</p>
<p class="last">By default <em>radius</em> is <code class="docutils literal notranslate"><span class="pre">'earth'</span></code> which means that if and
only if the radius can not found from the datums of any
coordinate reference constucts, then the default radius
taken as 6371229 metres.</p>
</dd>
<dt>components: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then a dictionary of orthogonal weights components
is returned instead of a field. Each key is a tuple of
integers representing axes positions in the field
construct’s data, with corresponding values of weights in
<a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Data</span></code></a> objects. The axes of weights match the axes of the
field construct’s data array in the order given by their
dictionary keys.</p>
</dd>
<dt>methods: <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True, then return a dictionary describing methods used
to create the weights.</p>
</dd>
</dl>
<p>kwargs: deprecated at version 3.0.0.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Field</span></code></a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></a></dt>
<dd><p class="first last">The weights field or, if <em>components</em> is True, orthogonal
weights in a dictionary.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p><strong>Examples:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">&lt;CF Field: air_temperature(time(12), latitude(145), longitude(192)) K&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">()</span>
<span class="go">&lt;CF Field: long_name:weight(time(12), latitude(145), longitude(192)) 86400 s.rad&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="go">&lt;CF Field: long_name:weight(time(12), latitude(145), longitude(192)) 1&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{(0,): &lt;CF Data(12): [30.0, ..., 31.0] d&gt;,</span>
<span class="go"> (1,): &lt;CF Data(145): [5.94949998503e-05, ..., 5.94949998503e-05]&gt;,</span>
<span class="go"> (2,): &lt;CF Data(192): [0.0327249234749, ..., 0.0327249234749] radians&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="go">{(0,): &lt;CF Data(12): [0.967741935483871, ..., 1.0] 1&gt;,</span>
<span class="go"> (1,): &lt;CF Data(145): [0.00272710399807, ..., 0.00272710399807]&gt;,</span>
<span class="go"> (2,): &lt;CF Data(192): [1.0, ..., 1.0]&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="mf">2.0</span><span class="p">)</span>
<span class="go">{(0,): &lt;CF Data(12): [1.935483870967742, ..., 2.0] 1&gt;,</span>
<span class="go"> (1,): &lt;CF Data(145): [0.00545420799614, ..., 0.00545420799614]&gt;,</span>
<span class="go"> (2,): &lt;CF Data(192): [2.0, ..., 2.0]&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">{(0,): &#39;linear time&#39;,</span>
<span class="go"> (1,): &#39;linear sine latitude&#39;,</span>
<span class="go"> (2,): &#39;linear longitude&#39;}</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2019, David Hassell.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="../_sources/method/cf.Field.weights.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>